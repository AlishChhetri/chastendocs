<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Chasten Documentation - README</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Chasten Documentation</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./chastenwiki.html" rel="" target="" aria-current="page">
 <span class="menu-text">README</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./videos.html" rel="" target="">
 <span class="menu-text">Chasten Videos</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./issues.html" rel="" target="">
 <span class="menu-text">Issues</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="./team.html" rel="" target="">
 <span class="menu-text">Meet the Team</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/AlishChhetri/chastendocs" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://discord.gg/aNfn8DNEMx" rel="" target=""><i class="bi bi-discord" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">üéâ Introduction</a></li>
  <li><a href="#definitions" id="toc-definitions" class="nav-link" data-scroll-target="#definitions">üòÇ Definitions</a></li>
  <li><a href="#features" id="toc-features" class="nav-link" data-scroll-target="#features">üîãFeatures</a></li>
  <li><a href="#requirements" id="toc-requirements" class="nav-link" data-scroll-target="#requirements">‚ö°Ô∏è Requirements</a></li>
  <li><a href="#installation" id="toc-installation" class="nav-link" data-scroll-target="#installation">üîΩ Installation</a></li>
  <li><a href="#configuration" id="toc-configuration" class="nav-link" data-scroll-target="#configuration">ü™Ç Configuration</a></li>
  <li><a href="#analysis" id="toc-analysis" class="nav-link" data-scroll-target="#analysis">‚ú® Analysis</a></li>
  <li><a href="#integration" id="toc-integration" class="nav-link" data-scroll-target="#integration">üöß Integration</a></li>
  <li><a href="#results" id="toc-results" class="nav-link" data-scroll-target="#results">üåÑ Results</a></li>
  <li><a href="#deployment" id="toc-deployment" class="nav-link" data-scroll-target="#deployment">üåé Deployment</a></li>
  <li><a href="#interaction" id="toc-interaction" class="nav-link" data-scroll-target="#interaction">ü§Ø Interaction</a></li>
  <li><a href="#learning" id="toc-learning" class="nav-link" data-scroll-target="#learning">ü§ó Learning</a></li>
  <li><a href="#improvement" id="toc-improvement" class="nav-link" data-scroll-target="#improvement">üßóImprovement</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">README</h1>
<p class="subtitle lead">Welcome to the official documentation for</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p><a href="https://github.com/AstuteSource/chasten"><img src="chasten-logo-medium.svg" alt="Chasten Logo" title="Chasten Logo"></a></p>
<p><a href="https://github.com/gkapfham/chasten/actions/workflows/build.yml"><img src="https://github.com/gkapfham/chasten/actions/workflows/build.yml/badge.svg" class="img-fluid" alt="build"></a> <img src="https://img.shields.io/endpoint?url=https://gist.githubusercontent.com/gkapfham/5300aa276fa9261b2b21b96c3141b3ad/raw/covbadge.json" class="img-fluid" alt="Coverage"> <a href="https://github.com/gkapfham/chasten/search?l=python"><img src="https://img.shields.io/badge/Language-Python-blue.svg" class="img-fluid" alt="Language: Python"></a> <a href="https://github.com/psf/black"><img src="https://img.shields.io/badge/Code%20Style-Black-blue.svg" class="img-fluid" alt="Code Style: black"></a> <a href="https://github.com/gkapfham/chasten/graphs/commit-activity"><img src="https://img.shields.io/badge/Maintained%3F-Yes-blue.svg" class="img-fluid" alt="Maintenance"></a> <a href="https://www.gnu.org/licenses/lgpl-3.0"><img src="https://img.shields.io/badge/License-LGPL%20v3-blue.svg" class="img-fluid" alt="License LGPL v3"></a></p>
<section id="introduction" class="level2">
<h2 class="anchored" data-anchor-id="introduction">üéâ Introduction</h2>
<ul>
<li><p><strong>Chasten</strong> is a Python program that uses <a href="https://www.w3schools.com/xml/xpath_syntax.asp">XPath</a> expressions to find patterns in the <a href="https://docs.python.org/3/library/ast.html">abstract syntax tree</a> (AST) of a Python program. You can use Chasten to quickly implement your own configurable linting rules, without having to use a complex AST analysis framework or resorting to imprecise regular expressions.</p></li>
<li><p>Do you want to ensure that a Python program has does not have any triple-nested <code>for</code> loops inside of <code>async</code> functions? Or, do you want to confirm that every function inside your Python program has type annotations and a docstring comment? <strong>Chasten can help</strong>! It allows you to express these checks ‚Äî and many other types of analyses as well ‚Äî in simple YAML files that contain XPath expressions.</p></li>
</ul>
</section>
<section id="definitions" class="level2">
<h2 class="anchored" data-anchor-id="definitions">üòÇ Definitions</h2>
<ul>
<li><strong>chasten</strong> (transitive verb) ‚Äúto make someone aware of failure or of having done something wrong‚Äù, <a href="https://dictionary.cambridge.org/us/dictionary/english/chasten">Cambridge Dictionary</a>.
<ul>
<li><strong>Example Sentence</strong>: ‚ÄúHer remarks are a gift to me even as they chasten and redirect my efforts to expand the arguments of this book into a larger one.‚Äù, <a href="https://www.cambridge.org/gb/cambridgeenglish/better-learning-insights/corpus">Cambridge English Corpus</a></li>
</ul></li>
<li><strong>chasten</strong> (uncountable or singular noun) ‚Äúa tool that analyzes the abstract syntax tree of a Python program to detect potential sources of programmer mistakes so as to prevent program failure‚Äù, <a href="https://github.com/AstuteSource">AstuteSource Developers</a>.
<ul>
<li><strong>Student Sentence</strong>: ‚ÄúI‚Äôm glad that <code>chasten</code> reminded me to add docstrings and type annotations to all of the functions in <code>main.py</code>. It was easy to see what to fix!‚Äù</li>
<li><strong>Instructor Sentence</strong>: ‚Äú<code>chasten</code> makes it easy for me to reliably confirm that student programs have the required coding constructs. It‚Äôs much better than using regular expressions!‚Äù</li>
<li><strong>Developer Sentence</strong>: ‚ÄúSince I was already familiar with XPath expressions, <code>chasten</code> made it fun and easy for me to do an automate analysis of a Python codebase that I maintain.‚Äù</li>
<li><strong>Researcher Sentence</strong>: ‚ÄúIn addition to helping me quickly scan the source code of Python projects, <code>chasten</code>‚Äôs analysis dashboard lets me effectively explore the data I collect.‚Äù</li>
</ul></li>
</ul>
</section>
<section id="features" class="level2">
<h2 class="anchored" data-anchor-id="features">üîãFeatures</h2>
<ul>
<li>‚ú® Easy-to-configure, automated analysis of a Python program‚Äôs abstract syntax tree</li>
<li>üìÉ Flexible and easy-to-use YAML-based configuration file for describing analyses and checks</li>
<li>ü™Ç Automated generation and verification of the YAML configuration files for an analysis</li>
<li>üöÄ Configurable saving of analysis results in the JSON, CSV, or SQLite formats</li>
<li>üöß Automated integration of result files that arise from multiple runs of the tool</li>
<li>üåÑ Interactive results analysis through the use of a locally running datasette server</li>
<li>üåé Automated deployment of a datasette server on platforms like Fly or Vercel</li>
<li>ü¶ö Detailed console and syslog logging to furnish insights into the tool‚Äôs behavior</li>
<li>üí† Rich command-line interface with robust verification of arguments and options</li>
<li>ü§Ø Interactive command-line generation through an easy-to-use terminal user interface</li>
</ul>
</section>
<section id="requirements" class="level2">
<h2 class="anchored" data-anchor-id="requirements">‚ö°Ô∏è Requirements</h2>
<ul>
<li>Python 3.11</li>
<li>Chasten leverages numerous Python packages, including notable ones such as:
<ul>
<li><a href="https://github.com/simonw/datasette">Datasette</a>: Interactive data analysis dashboards</li>
<li><a href="https://github.com/spookylukey/pyastgrep">Pyastgrep</a>: XPath-based analysis of a Python program‚Äôs AST</li>
<li><a href="https://github.com/pydantic/pydantic">Pydantic</a>: Automated generation and validation of configuration files</li>
<li><a href="https://github.com/Textualize/rich">Rich</a>: Full-featured formatting and display of text in the terminal</li>
<li><a href="https://github.com/Textualize/trogon">Trogon</a>: Automated generation of terminal user interfaces for a command-line tool</li>
<li><a href="https://github.com/tiangolo/typer">Typer</a>: Easy-to-implement and fun-to-use command-line interfaces</li>
</ul></li>
<li>The developers of Chasten use <a href="https://github.com/python-poetry/poetry">Poetry</a> for packaging and dependency management</li>
</ul>
</section>
<section id="installation" class="level2">
<h2 class="anchored" data-anchor-id="installation">üîΩ Installation</h2>
<p>Follow these steps to install the <code>chasten</code> program:</p>
<ul>
<li>Install Python 3.11 for your operating system</li>
<li>Install <a href="https://github.com/pypa/pipx">pipx</a> to support program installation in isolated environments</li>
<li>Type <code>pipx install chasten</code> to install Chasten</li>
<li>Type <code>pipx list</code> and confirm that Chasten is installed</li>
<li>Type <code>chasten --help</code> to learn how to use the tool</li>
</ul>
</section>
<section id="configuration" class="level2">
<h2 class="anchored" data-anchor-id="configuration">ü™Ç Configuration</h2>
<p>You can configure <code>chasten</code> with two YAML files, normally called <code>config.yml</code> and <code>checks.yml</code>. Although <code>chasten</code> can generate a starting configuration, you can check out the üì¶ <a href="https://github.com/AstuteSource/chasten-configuration">AstuteSource/chasten-configuration</a> repository for example(s) of configuration files that setup the tool. Although the <code>config.yml</code> file can reference multiple check configuration files, this example shows how to specify a single <code>checks.yml</code> file:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode yml code-with-copy"><code class="sourceCode yaml"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># chasten configuration</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">chasten</span><span class="kw">:</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="co">  # point to a single checks file</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="fu">checks-file</span><span class="kw">:</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="kw">-</span><span class="at"> checks.yml</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The <code>checks.yml</code> file must contain one or more checks. What follows is an example of a check configuration file with two checks that respectively find the first executable line of non-test and test-case functions in a Python project. Note that the <code>pattern</code> attribute specifies the XPath version 2.0 expression that <code>chasten</code> will use to detect the specified type of Python function. You can type <code>chasten configure validate --config &lt;path to chasten-configuration/ directory&gt;</code> after filling in <code>&lt;path to chasten-configuration&gt;</code> with the fully-qualified name of your configuration directory and the tool will confirm that your configuration meets the tool‚Äôs specification. You can also use the command <code>chasten configure create</code> command to automatically generate a starting configuration! Typing <code>chasten configure --help</code> will explain how to configure the tool.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode yml code-with-copy"><code class="sourceCode yaml"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">checks</span><span class="kw">:</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> </span><span class="st">"all-non-test-function-definition"</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">code</span><span class="kw">:</span><span class="at"> </span><span class="st">"FUNC"</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">id</span><span class="kw">:</span><span class="at"> </span><span class="st">"FUNC001"</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">description</span><span class="kw">:</span><span class="at"> </span><span class="st">"First executable line of a non-test function, skipping over docstrings and/or comments"</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">pattern</span><span class="kw">:</span><span class="at"> </span><span class="st">'//FunctionDef[not(contains(@name, "test_"))]/body/Expr[value/Constant]/following-sibling::*[1] | //FunctionDef[not(contains(@name, "test_"))]/body[not(Expr/value/Constant)]/*[1]'</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="at">  </span><span class="kw">-</span><span class="at"> </span><span class="fu">name</span><span class="kw">:</span><span class="at"> </span><span class="st">"all-test-function-definition"</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">code</span><span class="kw">:</span><span class="at"> </span><span class="st">"FUNC"</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">id</span><span class="kw">:</span><span class="at"> </span><span class="st">"FUNC002"</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">description</span><span class="kw">:</span><span class="at"> </span><span class="st">"First executable line of a test function, skipping over docstrings and/or comments"</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">pattern</span><span class="kw">:</span><span class="at"> </span><span class="st">'//FunctionDef[starts-with(@name, "test_")]/body/Expr[value/Constant]/following-sibling::*[1] | //AsyncFunctionDef[starts-with(@name, "test_")]/body/Expr[value/Constant]/following-sibling::*[1] | //FunctionDef[starts-with(@name, "test_")]/body[not(Expr/value/Constant)]/*[1] | //AsyncFunctionDef[starts-with(@name, "test_")]/body[not(Expr/value/Constant)]/*[1]'</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a><span class="at">    </span><span class="fu">count</span><span class="kw">:</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">min</span><span class="kw">:</span><span class="at"> </span><span class="dv">1</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a><span class="at">      </span><span class="fu">max</span><span class="kw">:</span><span class="at"> </span><span class="dv">10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="analysis" class="level2">
<h2 class="anchored" data-anchor-id="analysis">‚ú® Analysis</h2>
<p>Since <code>chasten</code> needs a project with Python source code as the input to its <code>analysis</code> sub-command, you can clone the üì¶ <a href="https://github.com/AstuteSource/lazytracker">AstuteSource/lazytracker</a> and üì¶ <a href="https://github.com/AstuteSource/multicounter">AstuteSource/multicounter</a> repositories that are forks of existing Python projects created for convenient analysis. To incrementally analyze these two projects with <code>chasten</code>, you can type the following commands to produce a results JSON file for each project:</p>
<ul>
<li>After creating a <code>subject-data/</code> directory that contains a <code>lazytracker/</code> directory, you can run the <code>chasten analyze</code> command for the <code>lazytracker</code> program:</li>
</ul>
<pre class="shell"><code>chasten analyze lazytracker \
        --config &lt;path to the chasten-configuration/ directory&gt; \
        --search-path &lt;path to the lazytracker/ directory&gt; \
        --save-directory &lt;path to the subject-data/lazytracker/ directory&gt; \
        --save</code></pre>
<ul>
<li><p>Now you can scan the output to confirm that, for instance, <code>chasten</code> finds <code>6</code> test functions in the <code>lazytracker</code> project. If you look in the <code>subject-data/lazytracker</code> directory you will find a JSON file with a name like <code>chasten-results-lazytracker-20230823162341-4c23fc443a6b4c4aa09886f1ecb96e9f.json</code>. Running <code>chasten</code> on this program more than once will produce a new results file with a different timestamp (i.e., <code>20230823162341</code>) and unique identifier (i.e., <code>4c23fc443a6b4c4aa09886f1ecb96e9f</code>) in its name, thus ensuring that you do not accidentally write over your prior results when using <code>--save</code>.</p></li>
<li><p>After creating a <code>multicounter/</code> directory in the existing <code>subject-data/</code> directory, you can run the <code>chasten analyze</code> command for the <code>multicounter</code> program:</p></li>
</ul>
<pre class="shell"><code>chasten analyze multicounter \
        --config &lt;path to the chasten-configuration/ directory&gt; \
        --search-path &lt;path to the multicounter/ directory&gt; \
        --save-directory &lt;path to the subject-data/lazytracker/ directory&gt; \
        --save</code></pre>
<ul>
<li><p>Now you can scan the output to confirm that, as an example, <code>chasten</code> finds <code>10</code> test functions in the <code>multicounter</code> project. If you look in the <code>subject-data/lazytracker</code> directory you will find a JSON file with a name like <code>chasten-results-multicounter-20230821171712-5c52f2f1b61b4cce97624cc34cb39d4f.json</code> and name components that are similar to the JSON file created for the <code>multicounter</code> program.</p></li>
<li><p>Since the <code>all-test-function-definition</code> check specifies that the program must have between <code>1</code> and <code>10</code> tests you will notice that this check passes for both <code>lazytracker</code> and <code>multicounter</code>. This means that <code>chasten</code> returns a <code>0</code> error code to communicate to your operating system that the check passed.</p></li>
<li><p>You can learn more about how to use the <code>analyze</code> sub-command by typing <code>chasten analyze --help</code>. For instance, <code>chasten</code> supports the <code>--check-include</code> and <code>--check-exclude</code> options that allow you to respectively include and exclude specific checks according to fuzzy matching rules that you can specify for any of a check‚Äôs attributes specified in the <code>checks.yml</code> file.</p></li>
</ul>
</section>
<section id="integration" class="level2">
<h2 class="anchored" data-anchor-id="integration">üöß Integration</h2>
<p>After running <code>chasten</code> on the <code>lazytracker</code> and <code>multicounter</code> programs you can integrate their individual JSON files into a single JSON file, related CSV files, and a SQLite database. Once you have made an <code>integrated-data/</code> directory, you can type this command to perform the integration:</p>
<pre class="shell"><code>chasten integrate all-programs \
        &lt;path to subject-data&gt;/**/*.json \
        --save-directory &lt;path to the integrated-data/ directory&gt;</code></pre>
<p>This command will produce a directory like <code>chasten-flattened-csvs-sqlite-db-all-programs-20230823171016-2061b524276b4299b04359ba30452923/</code> that contains a SQLite database called <code>chasten.db</code> and a <code>csv/</code> directory with CSV files that correspond to each of the tables inside of the database.</p>
<p>You can learn more about the <code>integrate</code> sub-command by typing <code>chasten integrate --help</code>.</p>
</section>
<section id="results" class="level2">
<h2 class="anchored" data-anchor-id="results">üåÑ Results</h2>
<p>If you want to create an interactive analysis dashboard that uses üì¶ <a href="https://github.com/simonw/datasette">simonw/datasette</a> you can run <code>chasten datasette-serve &lt;path containing integrated results&gt;/chasten.db --port 8001</code>. Now you can use the dashboard in your web browser to analyze the results while you study the source code for these projects with your editor! Examining the results will reveal that <code>chasten</code>, through its use of üì¶ <a href="https://github.com/spookylukey/pyastgrep">spookylukey/pyastgrep</a>, correctly uses the XPath expression for <code>all-test-function-definition</code> to find the first line of executable source code inside of each test, skipping over a function‚Äôs docstring and leading comments.</p>
<p>For the <code>lazytracker</code> program you will notice that <code>chasten</code> reports that there are <code>6</code> test cases even though <code>pytest</code> only finds and runs <code>5</code> tests. This is due to the fact that <code>tests/test_tracked.py</code> test suite in <code>lazytracker</code> contains a function starting with <code>test_</code> inside of another function starting with <code>test_</code>. This example illustrates the limitations of static analysis with <code>chasten</code>! Even though the tool correctly detected all of the ‚Äútest functions‚Äù, the nesting of the functions in the test suite means that <code>pytest</code> will run the outer <code>test_</code> function and use the inner <code>test_</code> function for testing purposes.</p>
<p>With that said, <code>chasten</code> correctly finds each of the tests for the <code>multicounter</code> project. You can follow each of the previous steps in this document to apply <code>chasten</code> to your own Python program!</p>
</section>
<section id="deployment" class="level2">
<h2 class="anchored" data-anchor-id="deployment">üåé Deployment</h2>
<p>If you want to make your <code>chasten.db</code> publicly available for everyone to study, you can use the <code>chasten datasette-publish</code> sub-command. As long as you have followed the installation instructions for üì¶ <a href="https://github.com/simonw/datasette-publish-fly">simonw/datasette-publish-fly</a> and üì¶ <a href="https://github.com/simonw/datasette-publish-vercel">simonw/datasette-publish-vercel</a>, you can use the plugins to deploy a public <code>datasette</code> server that hosts your <code>chasten.db</code>. For instance, running the command <code>chasten datasette-publish &lt;path containing integrated results&gt;/chasten.db --platform vercel</code> will publish the results from running <code>chasten</code> on <code>lazytracker</code> and <code>multicounter</code> to the <a href="https://vercel.com/">Vercel</a> platform.</p>
<p>Importantly, the use of the <code>chasten datasette-publish</code> command with the <code>--platform vercel</code> option requires you to have previously followed the instructions for the <code>datasette-publish-vercel</code> plugin to install the <code>vercel</code> command-line tool. This is necessary because, although <code>datasette-publish-vercel</code> is one of <code>chasten</code>‚Äôs dependencies neither <code>chasten</code> nor <code>datasette-publish-vercel</code> provide the <code>vercel</code> tool even though they use it. You must take similar steps before publishing your database to <a href="https://fly.io/">Fly</a>!</p>
</section>
<section id="interaction" class="level2">
<h2 class="anchored" data-anchor-id="interaction">ü§Ø Interaction</h2>
<p>Even though <code>chasten</code> is a command-line application, you create interactively create the tool‚Äôs command-line arguments and options through a terminal user interface (TUI). To use TUI-based way to create a complete command-line for <code>chasten</code> you can type the command <code>chasten interact</code>.</p>
</section>
<section id="learning" class="level2">
<h2 class="anchored" data-anchor-id="learning">ü§ó Learning</h2>
<ul>
<li><strong>Curious about the nodes that are available in a Python program‚Äôs AST?</strong>
<ul>
<li><a href="https://docs.python.org/3/library/ast.html">Abstract Syntax Tree documentation</a> introduces the nodes of a Python AST</li>
<li><a href="https://greentreesnakes.readthedocs.io/en/latest/index.html">Green Tea Snakes</a> provides the ‚Äúmissing Python AST docs‚Äù</li>
<li><a href="https://github.com/davep/textual-astview">Textual AST View</a> provides a terminal-based tool for browsing a Python program‚Äôs AST</li>
</ul></li>
<li><strong>Want to learn more about how to write XPath expressions for a Python AST?</strong>
<ul>
<li><a href="https://github.com/spookylukey/pyastgrep">Pyastgrep</a> offers examples of XPath expressions for querying a Python program‚Äôs AST</li>
<li><a href="https://www.w3schools.com/xml/xpath_syntax.asp">XPath Documentation</a> describes how to write XPath expressions</li>
<li><a href="https://www.w3schools.com/xml/xpath_axes.asp">XPath Axes</a> summaries the ways that XPath axes relate a note to other nodes</li>
</ul></li>
<li><strong>Interested in exploring other approaches to querying source code?</strong>
<ul>
<li><a href="https://www.srcml.org/">srcML</a> supports XPath-based querying of programs implemented in C, C#, C++, and Java</li>
<li><a href="https://tree-sitter.github.io/tree-sitter/">Treesitter</a> provides a general-purpose approach to modelling and querying source code</li>
<li><a href="https://github.com/tree-sitter/py-tree-sitter">Python Treesitter</a> offers a Python language bindings for to parsing and querying with Treesitter</li>
</ul></li>
</ul>
</section>
<section id="improvement" class="level2">
<h2 class="anchored" data-anchor-id="improvement">üßóImprovement</h2>
<ul>
<li>Found a bug or have a feature that the development team should implement? <a href="https://github.com/AstuteSource/chasten/issues">Raise an issue</a>!</li>
<li>Interesting in learning more about tool usage details? <a href="https://github.com/AstuteSource/chasten/wiki">Check the wiki</a>!</li>
<li>Want to discuss ways to use the tool? <a href="https://github.com/AstuteSource/chasten/discussions/2">Participate in discussions</a>!</li>
</ul>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "Óßã";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center"><a href="#" aria-label="Go to the top of the page">Top </a></div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/AlishChhetri/chastendocs">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://discord.gg/aNfn8DNEMx">
      <i class="bi bi-discord" role="img">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>



<script src="site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>